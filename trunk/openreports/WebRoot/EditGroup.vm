#parse("Banner.vm") 

#parse("Errors.vm")

<script type="text/javascript" src="js/yui-ext/yui-ext-core.js"></script>
<script type="text/javascript" src="js/add-to-group.js"></script>

<script type="text/javascript">
  var tags = [$!tagList];            
</script>

<a class="back-link img-report-small" href="listGroups.action">Back to Groups </a>
 
<br/>

<div align="center">  
  
  <div class="important img-group" id="instructions" style="width: 70%;">
   #if ($command == "add")
   	Add Group
   #end
   #if ($command != "add")
   	Selected Group: $name
   #end
  </div>	  
  
  <form action="editGroup.action" style="width: 75%;">
  
  <table class="dialog" >    
    <tr class="a">
      <td class="boldText" width="20%">Name</td>
      <td><input type="text" size="60" name="name" value="$!name"></td>
    </tr>
    <tr class="b">
      <td class="boldText">Description</td>
      <td><input type="text" size="60" name="description" value="$!description"></td>
    </tr>
    <tr>
      <td class="boldText">Tag as</td>
      <td><input type="text" size="60" name="tags" value="$!tags"></td>
    </tr>
    <tr>
   	  <td valign="top" class="boldText">Reports</td>
   	  <td>
   		<ul id="currentReports" class="checklist" style="height:20em;width:24em;">
   		#foreach ($report in $reportsInGroup)
		   <li>      
        	<input type="checkbox" name="reportIds" value="$report.id" CHECKED>
        	$report.name
      	   </li>
        #end
      </td>
      <td valign="top">
        </ul><input class="standardButton" type="button" id="showAddReport" value="Add Reports">
      </td>
    </tr>
  </table>
   
  <div class="button-bar" id="buttons" >
       <input class="standardButton" type="submit" name="submitOk" value="Save">
       <input class="standardButton" type="submit" name="submitDuplicate" value="Duplicate">
  </div>
    
  <input type="hidden" name="id" value="$!id">
  <input type="hidden" name="command" value="$!command">    
  
  </form>  
  
</div>
  
<div id="addReportDialog">
  <div class="hd">Add Reports to Group</div>
  <div class="bd">  
    <form>  
    <table class="dialog"  >   
      <tr>
        <td class="boldText" width="20%">Filter By</td>
        <td>
            <input type="radio" id="filterByName" name="filterType" value="name" CHECKED>Name 
            <input type="radio" id="filterByTag" name="filterType" value="tag">Tag
        </td>
      </tr>   
      <tr>
        <td class="boldText" width="20%">Filter</td>
        <td><input type="text" id="filter" size="38" ></td>
      </tr>              
      <tr>
        <td valign="top" class="boldText">Reports</td>
        <td>
          <select id="availableReports" class="checklist" size="16" style="width: 20em;" multiple>
          #foreach ($report in $reports)
            #set( $available = true )    
            #foreach ($reportInGroup in $reportsInGroup)
              #if ($report.id == $reportInGroup.id)
                #set( $available = false )
              #end
            #end
            #if ($available) 
              <option id="$report.id|$!action.getTags($report.id)" value="$report.id">$report.name</option>
            #end             
          #end
          </select>
        </td>
      </tr>
    </table>
    </form>
  </div>  
</div>

#parse("Footer.vm") 

